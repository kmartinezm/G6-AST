
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unidad 2: Estructura de los datos en series de tiempo &#8212; Análisis de Series de Tiempo</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Unidad 3: Preprocesamiento y visualización" href="und3_forecast.html" />
    <link rel="prev" title="Pronóstico de precio de bolsa de la energía" href="main_pbna.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo_jav.PNG" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Análisis de Series de Tiempo</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="main_pbna.html">
   Pronóstico de precio de bolsa de la energía
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Unidad 2: Estructura de los datos en series de tiempo
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="und3_forecast.html">
   Unidad 3: Preprocesamiento y visualización
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/und2_forecast.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/kmartinezm/G6-AST.git"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/kmartinezm/G6-AST.git/issues/new?title=Issue%20on%20page%20%2Fund2_forecast.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/kmartinezm/G6-AST.git/master?urlpath=tree/docs/und2_forecast.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduccion">
   2.1 Introducción
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accion">
   2.2 Acción
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparacion-de-los-datos">
     2.2.1 Preparación de los datos
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-promedio-movil">
     2.2.2 Análisis promedio movil
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-rezagos">
     2.2.3 Análisis de rezagos
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-estacionalidad">
     2.2.3 Análisis de estacionalidad
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Unidad 2: Estructura de los datos en series de tiempo</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduccion">
   2.1 Introducción
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accion">
   2.2 Acción
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparacion-de-los-datos">
     2.2.1 Preparación de los datos
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-promedio-movil">
     2.2.2 Análisis promedio movil
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-rezagos">
     2.2.3 Análisis de rezagos
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-estacionalidad">
     2.2.3 Análisis de estacionalidad
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="unidad-2-estructura-de-los-datos-en-series-de-tiempo">
<h1>Unidad 2: Estructura de los datos en series de tiempo<a class="headerlink" href="#unidad-2-estructura-de-los-datos-en-series-de-tiempo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduccion">
<h2>2.1 Introducción<a class="headerlink" href="#introduccion" title="Permalink to this headline">¶</a></h2>
<p>Dado que una serie de tiempo es un conjunto de observaciones sobre los valores que toma una variable (cuantitativa) a través del tiempo, exploraremos las tendencias o cambios que se reflejan y afectan su comportamiento.</p>
</div>
<div class="section" id="accion">
<h2>2.2 Acción<a class="headerlink" href="#accion" title="Permalink to this headline">¶</a></h2>
<p>Ahora, en esta Unidad 2, se debe continuar con los datos presentados en dicho entregable y se debe evidenciar, en una de las variables en el tiempo, la aproximación en promedio móvil, en rezagos y en estacionalidad. Todo lo anterior, a través de funciones y gráficas que permitan detectar patrones y ciclos de la variable.</p>
<div class="section" id="preparacion-de-los-datos">
<h3>2.2.1 Preparación de los datos<a class="headerlink" href="#preparacion-de-los-datos" title="Permalink to this headline">¶</a></h3>
<p>Previo al análisis detallado, es imperativo comprender el proceso de preparación de datos temporales para garantizar su idoneidad y coherencia en el estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importando librerias</span>

<span class="c1"># librerias para la transformación de datos</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.seasonal</span> <span class="kn">import</span> <span class="n">seasonal_decompose</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.stattools</span> <span class="kn">import</span> <span class="n">adfuller</span>

<span class="c1"># libreria para visualización de datos</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># recopilación de datos</span>
<span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./dataset.csv&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
<span class="n">df_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>codigo</th>
      <th>contenido</th>
      <th>hora1</th>
      <th>hora2</th>
      <th>hora3</th>
      <th>hora4</th>
      <th>hora5</th>
      <th>hora6</th>
      <th>hora7</th>
      <th>...</th>
      <th>hora15</th>
      <th>hora16</th>
      <th>hora17</th>
      <th>hora18</th>
      <th>hora19</th>
      <th>hora20</th>
      <th>hora21</th>
      <th>hora22</th>
      <th>hora23</th>
      <th>hora24</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>87.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>75.768212</td>
      <td>...</td>
      <td>75.768212</td>
      <td>71.278212</td>
      <td>69.067212</td>
      <td>76.278212</td>
      <td>77.778212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.778212</td>
      <td>76.778212</td>
      <td>...</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>81.768212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>82.778212</td>
      <td>76.778212</td>
      <td>76.778212</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>...</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>87.778212</td>
      <td>114.425212</td>
      <td>87.778212</td>
      <td>82.778212</td>
      <td>77.678212</td>
      <td>77.678212</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>...</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>85.778212</td>
      <td>85.778212</td>
      <td>87.778212</td>
      <td>85.778212</td>
      <td>85.778212</td>
      <td>81.768212</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>88.278212</td>
      <td>...</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>91.134212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>86.778212</td>
      <td>86.778212</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 27 columns</p>
</div></div></div>
</div>
<p>Se realiza una transformacion de los datos separandoos por año,mes,dia y periodo, esto con el fin de poder graficar y analizar mas detalladamente el dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">trf_data</span><span class="p">(</span><span class="n">df_data</span><span class="p">):</span>
    
    <span class="c1"># copia del dataframe</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="c1"># transformación de fechas</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)</span>
    
    <span class="c1"># agregando las columnas de fechas</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ano&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">year</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">month</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;dia&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">day</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="c1"># selección de columnas</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">,</span><span class="s1">&#39;ano&#39;</span><span class="p">,</span><span class="s1">&#39;mes&#39;</span><span class="p">,</span><span class="s1">&#39;dia&#39;</span><span class="p">,</span> <span class="s1">&#39;hora1&#39;</span><span class="p">,</span> <span class="s1">&#39;hora2&#39;</span><span class="p">,</span> <span class="s1">&#39;hora3&#39;</span><span class="p">,</span><span class="s1">&#39;hora4&#39;</span><span class="p">,</span> <span class="s1">&#39;hora5&#39;</span><span class="p">,</span> <span class="s1">&#39;hora6&#39;</span><span class="p">,</span> <span class="s1">&#39;hora7&#39;</span><span class="p">,</span> <span class="s1">&#39;hora8&#39;</span><span class="p">,</span> <span class="s1">&#39;hora9&#39;</span><span class="p">,</span> <span class="s1">&#39;hora10&#39;</span><span class="p">,</span><span class="s1">&#39;hora11&#39;</span><span class="p">,</span> <span class="s1">&#39;hora12&#39;</span><span class="p">,</span> <span class="s1">&#39;hora13&#39;</span><span class="p">,</span> <span class="s1">&#39;hora14&#39;</span><span class="p">,</span> <span class="s1">&#39;hora15&#39;</span><span class="p">,</span> <span class="s1">&#39;hora16&#39;</span><span class="p">,</span> <span class="s1">&#39;hora17&#39;</span><span class="p">,</span><span class="s1">&#39;hora18&#39;</span><span class="p">,</span> <span class="s1">&#39;hora19&#39;</span><span class="p">,</span> <span class="s1">&#39;hora20&#39;</span><span class="p">,</span> <span class="s1">&#39;hora21&#39;</span><span class="p">,</span> <span class="s1">&#39;hora22&#39;</span><span class="p">,</span> <span class="s1">&#39;hora23&#39;</span><span class="p">,</span> <span class="s1">&#39;hora24&#39;</span><span class="p">]]</span>
    
    <span class="c1"># Convertir la tabla</span>
    <span class="n">list_id</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;hora&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
    <span class="n">list_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;hora&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
    
    <span class="c1"># pivotear la tabla</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="n">list_id</span><span class="p">,</span><span class="n">value_vars</span><span class="o">=</span><span class="n">list_value</span><span class="p">,</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;periodo&#39;</span><span class="p">,</span><span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;valor&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dataset trasnformado</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">trf_data</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>ano</th>
      <th>mes</th>
      <th>dia</th>
      <th>periodo</th>
      <th>valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-01</td>
      <td>2006</td>
      <td>1</td>
      <td>1</td>
      <td>hora1</td>
      <td>87.778212</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-01-02</td>
      <td>2006</td>
      <td>1</td>
      <td>2</td>
      <td>hora1</td>
      <td>76.278212</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-01-03</td>
      <td>2006</td>
      <td>1</td>
      <td>3</td>
      <td>hora1</td>
      <td>77.678212</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-01-04</td>
      <td>2006</td>
      <td>1</td>
      <td>4</td>
      <td>hora1</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-01-05</td>
      <td>2006</td>
      <td>1</td>
      <td>5</td>
      <td>hora1</td>
      <td>86.778212</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="analisis-promedio-movil">
<h3>2.2.2 Análisis promedio movil<a class="headerlink" href="#analisis-promedio-movil" title="Permalink to this headline">¶</a></h3>
<p>Adentrándonos en el análisis práctico, exploramos el concepto y la aplicación del promedio móvil, una herramienta para descifrar tendencias y patrones en series temporales. Para ello, llevamos a cabo los siguientes pasos:</p>
<p><strong>1. Remuestreo de la Serie Temporal:</strong></p>
<p>En el siguiente código, realizaremos el proceso de remuestreo de una serie temporal con el fin de transformarla en valores mensuales. Comenzaremos creando una copia del dataframe original para preservar los datos originales. Luego, emplearemos la función resample para agrupar los datos en intervalos mensuales y calcular la media de cada mes. Una vez completado el remuestreo, mostraremos el nuevo dataframe transformado que ahora contiene los datos mensuales. Este procedimiento es importante para la preparación de los datos previa a la aplicación del análisis de promedio móvil, lo que nos permitirá identificar tendencias y patrones a lo largo del tiempo de manera más precisa y clara.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remuestreando la serie de tiempo a valores mensuales</span>

<span class="c1"># creando una copia del dataframe</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1">#  remuestreando el dataframe a mensual</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">,</span><span class="s1">&#39;valor&#39;</span><span class="p">]]</span>

<span class="c1"># mostrando el dataframe transformado</span>
<span class="n">df_vcm</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-31</td>
      <td>79.026486</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-02-28</td>
      <td>75.520919</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-03-31</td>
      <td>65.787447</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-04-30</td>
      <td>54.012347</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-05-31</td>
      <td>53.819582</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>2. Gráfico de la serie temporal</strong></p>
<p>En el siguiente código, realizaremos el proceso de remuestreo de una serie temporal con el fin de transformarla en valores mensuales. Comenzaremos creando una copia del dataframe original para preservar los datos originales. Luego, emplearemos la función resample para agrupar los datos en intervalos mensuales y calcular la media de cada mes. Una vez completado el remuestreo, mostraremos el nuevo dataframe transformado que ahora contiene los datos mensuales. Este procedimiento es importante para la preparación de los datos previa a la aplicación del análisis de promedio móvil, lo que nos permitirá identificar tendencias y patrones a lo largo del tiempo de manera más precisa y clara.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gráficando la serie de tiempo</span>

<span class="c1"># creando lienzo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="c1"># creando gráfico de serie de tiempo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;pbna&#39;</span><span class="p">)</span>

<span class="c1"># creando los titulos</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio de Bolsa Nacional ($/kWh)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Serie de tiempo - Precio de Bolsa Nacional Mensual&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c1"># mostrando gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/und2_forecast_9_0.png" src="_images/und2_forecast_9_0.png" />
</div>
</div>
<p><strong>3. Cálculo del Promedio Móvil</strong></p>
<p>En esta sección, procedemos a calcular el promedio móvil de la serie temporal para analizar su comportamiento. Inicialmente, vamos a crear el promedio móvil de los últimos tres meses para observar cómo afecta esto a la gráfica. Los pasos realizados son los siguientes:</p>
<ul class="simple">
<li><p>Realización del Promedio Móvil:
Utilizando la función de promedio móvil, calculamos la media de los últimos tres meses de la serie temporal. Este proceso implica suavizar los datos al calcular el promedio de un intervalo móvil de tamaño predefinido.</p></li>
<li><p>Creación del Promedio Móvil de los Últimos Tres Meses:
Se crea una nueva columna en el dataframe llamada “ma3”, donde se almacena el promedio móvil de los últimos tres meses de la serie temporal. Para ello, se utiliza el método rolling junto con la función mean() y se desplaza un período hacia adelante utilizando shift(1) para evitar la contaminación de datos.</p></li>
<li><p>Visualización del Dataframe con el Promedio Móvil:
Mostramos las primeras diez filas del dataframe que ahora incluye la columna de promedio móvil. Esto nos permite inspeccionar cómo se han modificado los datos con la aplicación del promedio móvil y prepararnos para visualizar los resultados en la gráfica.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># realizando el promedio movil de la serie de tiempo</span>

<span class="c1">#  realizando el promedio movil de los ultimos tres meses</span>
<span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># monstrando el dataframe con el promedio movil</span>
<span class="n">df_vcm</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>valor</th>
      <th>ma3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-31</td>
      <td>79.026486</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-02-28</td>
      <td>75.520919</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-03-31</td>
      <td>65.787447</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-04-30</td>
      <td>54.012347</td>
      <td>73.444951</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-05-31</td>
      <td>53.819582</td>
      <td>65.106905</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2006-06-30</td>
      <td>52.985621</td>
      <td>57.873125</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2006-07-31</td>
      <td>59.316403</td>
      <td>53.605850</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2006-08-31</td>
      <td>66.532754</td>
      <td>55.373868</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2006-09-30</td>
      <td>103.448612</td>
      <td>59.611592</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2006-10-31</td>
      <td>130.511701</td>
      <td>76.432590</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gráficando la serie de tiempo</span>

<span class="c1"># creando lienzo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="c1"># creando gráfico de serie de tiempo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;pbna&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma3&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MA3&#39;</span><span class="p">)</span>

<span class="c1"># creando los titulos</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio de Bolsa Nacional ($/kWh)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Serie de tiempo - Precio de Bolsa Nacional Mensual&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c1"># mostrando gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/und2_forecast_12_0.png" src="_images/und2_forecast_12_0.png" />
</div>
</div>
<p>Tras examinar el resultado de la media móvil con un período de tres meses, se puede observar una similitud notable con la gráfica original de la serie temporal. Este hallazgo sugiere que la media móvil con n=3 está altamente influenciada por la variabilidad aleatoria presente en los datos.</p>
<p>Por lo tanto, resulta evidente la necesidad de explorar valores de períodos de media móvil más amplios para obtener una comprensión más precisa de las tendencias subyacentes en la serie temporal. Se recomienda analizar valores de medias móviles más altos, como seis, nueve y doce meses, para su evaluación. Estos períodos más extensos pueden proporcionar una perspectiva más robusta de las tendencias a largo plazo y ayudar a mitigar la influencia de la variabilidad aleatoria en el análisis de la serie temporal</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># realizando el promedio movil de la serie de tiempo</span>

<span class="c1">#  realizando el promedio movil de los ultimos tres meses</span>
<span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma6&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma9&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma12&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># monstrando el dataframe con el promedio movil</span>
<span class="n">df_vcm</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>valor</th>
      <th>ma3</th>
      <th>ma6</th>
      <th>ma9</th>
      <th>ma12</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-31</td>
      <td>79.026486</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-02-28</td>
      <td>75.520919</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-03-31</td>
      <td>65.787447</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-04-30</td>
      <td>54.012347</td>
      <td>73.444951</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-05-31</td>
      <td>53.819582</td>
      <td>65.106905</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2006-06-30</td>
      <td>52.985621</td>
      <td>57.873125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2006-07-31</td>
      <td>59.316403</td>
      <td>53.605850</td>
      <td>63.525400</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2006-08-31</td>
      <td>66.532754</td>
      <td>55.373868</td>
      <td>60.240386</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2006-09-30</td>
      <td>103.448612</td>
      <td>59.611592</td>
      <td>58.742359</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2006-10-31</td>
      <td>130.511701</td>
      <td>76.432590</td>
      <td>65.019220</td>
      <td>67.827797</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2006-11-30</td>
      <td>80.435968</td>
      <td>100.164356</td>
      <td>77.769112</td>
      <td>73.548376</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2006-12-31</td>
      <td>64.689679</td>
      <td>104.798761</td>
      <td>82.205176</td>
      <td>74.094493</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2007-01-31</td>
      <td>56.593622</td>
      <td>91.879116</td>
      <td>84.155853</td>
      <td>73.972519</td>
      <td>73.840627</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2007-02-28</td>
      <td>106.988677</td>
      <td>67.239756</td>
      <td>83.702056</td>
      <td>74.259327</td>
      <td>71.971221</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2007-03-31</td>
      <td>100.712232</td>
      <td>76.090659</td>
      <td>90.444710</td>
      <td>80.167004</td>
      <td>74.593534</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gráficando la serie de tiempo</span>

<span class="c1"># creando lienzo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># creando gráfico de serie de tiempo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma3&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MA3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma6&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MA6&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma9&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MA9&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;ma12&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MA12&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c1"># mostrando gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/und2_forecast_15_0.png" src="_images/und2_forecast_15_0.png" />
</div>
</div>
<p><strong>4. Resultados</strong></p>
<p>Después de analizar detenidamente las medias móviles con diferentes valores de n (n=3, 6, 9 y 12), se pueden extraer varias conclusiones significativas:</p>
<ul class="simple">
<li><p>Tendencias Identificadas:
Al observar las gráficas generadas para cada media móvil, se destaca la presencia de picos pronunciados en los años 2015 y 2017, así como en el año 2024. Estos picos podrían indicar períodos de cambios significativos en la serie temporal, lo que podría ser de interés para un análisis más detallado.</p></li>
<li><p>Suavizado de las Líneas:
Se observa claramente que a medida que el valor de n aumenta en la media móvil, las líneas generadas se vuelven más suaves. Este suavizado es una característica importante de las medias móviles con valores de n más altos, ya que ayuda a eliminar el ruido o la variabilidad aleatoria de los datos, permitiendo así una visualización más clara de las tendencias subyacentes.</p></li>
<li><p>Reducción de los Picos:
Otra observación relevante es que a medida que el valor de n aumenta, los picos en las gráficas de las medias móviles tienden a ser menos pronunciados. Esto sugiere que las medias móviles con valores de n más altos tienen una capacidad reducida para capturar fluctuaciones abruptas en los datos, lo que las hace más adecuadas para identificar tendencias a largo plazo en lugar de cambios repentinos.</p></li>
<li><p>Sensibilidad a los Datos Aleatorios:
Se destaca que las medias móviles con valores de n más altos tienden a ser menos sensibles a los efectos de los datos aleatorios. Esto implica que las predicciones basadas en medias móviles con valores de n más altos tendrán una fluctuación más lenta ante cambios en los períodos más recientes de la serie temporal. Esta característica es crucial para generar pronósticos más estables y confiables, especialmente en entornos con datos volátiles o ruidosos.</p></li>
</ul>
</div>
<div class="section" id="analisis-de-rezagos">
<h3>2.2.3 Análisis de rezagos<a class="headerlink" href="#analisis-de-rezagos" title="Permalink to this headline">¶</a></h3>
<p>En esta sección, exploramos la importancia del análisis de rezagos para identificar relaciones temporales entre puntos de datos consecutivos en una serie temporal. Este análisis nos permite comprender más profundamente la dinámica subyacente de la serie temporal y desvelar posibles patrones de comportamiento. Para realizar este análisis, llevamos a cabo los siguientes pasos:</p>
<ul class="simple">
<li><p>Creación de una Función para Graficar los Rezagos del Dataset:
Implementamos una función para visualizar los rezagos en el conjunto de datos. Esta función nos permite examinar cómo se relacionan los valores en diferentes puntos temporales, revelando posibles correlaciones y patrones de comportamiento en la serie temporal.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creando función para gráficar los rezagos del dataset</span>

<span class="c1"># Crear un panel de gráficos 3x3</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="c1"># Iterar sobre las filas y columnas del panel</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">lag</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># Calcular el lag correspondiente</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>  <span class="c1"># Obtener el eje actual</span>
        
        <span class="c1"># Calcular y graficar el lag plot con el lag actual</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">][:</span><span class="o">-</span><span class="n">lag</span><span class="p">],</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">][</span><span class="n">lag</span><span class="p">:],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Lag = </span><span class="si">{</span><span class="n">lag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;y(t)&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;y(t + </span><span class="si">{</span><span class="n">lag</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>

<span class="c1"># Ajustar el espaciado entre los subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/und2_forecast_17_0.png" src="_images/und2_forecast_17_0.png" />
</div>
</div>
<ul class="simple">
<li><p>De las graficas de rezagos no existe un patron de distancia que pueda determinar que exista estacionalidad. Los puntos siempre se mueven de alguna manera en cada uno de los rezagos.</p></li>
<li><p>Es necesario contar con analisis de disintos intervalos de tiempo para determinar si presenta estacionalidad o no.</p></li>
</ul>
</div>
<div class="section" id="analisis-de-estacionalidad">
<h3>2.2.3 Análisis de estacionalidad<a class="headerlink" href="#analisis-de-estacionalidad" title="Permalink to this headline">¶</a></h3>
<p>En esta sección, nos adentramos en el análisis de la estacionalidad de la serie temporal. La estacionalidad es un componente clave que revela patrones recurrentes o ciclos en los datos a lo largo del tiempo, lo que resulta fundamental para comprender su comportamiento a largo plazo. Para llevar a cabo este análisis, seguimos los siguientes pasos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Establecer &#39;fechaoperacion&#39; como el índice del DataFrame</span>
<span class="n">df_vcm</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Asegúrate de que la frecuencia esté definida (por ejemplo, mensual &#39;M&#39;)</span>
<span class="n">df_vcm</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="s1">&#39;M&#39;</span>

<span class="c1"># Realizar la descomposición estacional de la serie temporal</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">seasonal_decompose</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;additive&#39;</span><span class="p">)</span>

<span class="c1"># Graficar la serie original, la tendencia, la estacionalidad y el residuo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Original&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">seasonal</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estacionalidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/und2_forecast_19_0.png" src="_images/und2_forecast_19_0.png" />
</div>
</div>
<ul class="simple">
<li><p>El grafico de estacionalidad sugiere que existe un patron que se repite mensualmente, esto puede ser contrario a lo que se puede ver en el grafico de rezagos y al revisar la grafica de tendencia, en los datos no se observa que se tenga un patron o ciclo en el tiempo.</p></li>
<li><p>Es necesario contar con analisis de disintos intervalos de tiempo para determinar si presenta estacionalidad o no.</p></li>
</ul>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="main_pbna.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Pronóstico de precio de bolsa de la energía</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="und3_forecast.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Unidad 3: Preprocesamiento y visualización</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Grupo 6:Keyner Martínez, John Vargas y Johan Bolivar<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>