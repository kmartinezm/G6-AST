
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unidad 6: Regresión en series de tiempo &#8212; Análisis de Series de Tiempo</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Unidad 5: Modelos estacionarios en series de tiempo" href="und5_forecast.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo_jav.PNG" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Análisis de Series de Tiempo</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="main_pbna.html">
   Pronóstico de precio de bolsa de la energía
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="und2_forecast.html">
   Unidad 2: Estructura de los datos en series de tiempo
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="und3_forecast.html">
   Unidad 3: Preprocesamiento y visualización
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="und4_forecast.html">
   Unidad 4: Introducción a los modelos de pronóstico
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="und5_forecast.html">
   Unidad 5: Modelos estacionarios en series de tiempo
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Unidad 6: Regresión en series de tiempo
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/und6_forecast.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/kmartinezm/G6-AST.git"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/kmartinezm/G6-AST.git/issues/new?title=Issue%20on%20page%20%2Fund6_forecast.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/kmartinezm/G6-AST.git/master?urlpath=tree/docs/und6_forecast.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduccion">
   6.1 Introducción
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objetivo">
   6.2 Objetivo
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accion">
   6.3 Acción
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparacion-de-los-datos">
     6.3.1 Preparación de los datos
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#recopilacion-de-los-datos">
       6.3.1.1 Recopilación de los datos
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformacion-de-datos">
       6.3.1.2 Transformación de Datos
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#remuestreo-de-la-serie-temporal">
       6.3.1.3 Remuestreo de la serie temporal
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modelado-prophet">
     6.3.2 Modelado Prophet
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#preparacion-del-dataframe">
       6.3.2.1 Preparación del DataFrame
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inicializacion-y-ajuste-del-modelo-prophet">
       6.3.2.2 Inicialización y ajuste del modelo Prophet
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#generacion-de-predicciones-futuras">
       6.3.2.3 Generación de predicciones futuras
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizacion-de-resultados">
       6.3.2.4 Visualización de resultados
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conclusion">
       6.3.2.5 Conclusión
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparacion-de-modelos">
     6.3.4 Comparación de modelos
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modelo-arima">
       6.3.4.1 Modelo ARIMA
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modelo-holt-winters-ets">
       6.3.4.2 Modelo Holt-Winters (ETS)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizacion-de-pronosticos-de-los-modelos">
       6.3.4.3 Visualización de Pronósticos de los modelos
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Unidad 6: Regresión en series de tiempo</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduccion">
   6.1 Introducción
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objetivo">
   6.2 Objetivo
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accion">
   6.3 Acción
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparacion-de-los-datos">
     6.3.1 Preparación de los datos
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#recopilacion-de-los-datos">
       6.3.1.1 Recopilación de los datos
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformacion-de-datos">
       6.3.1.2 Transformación de Datos
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#remuestreo-de-la-serie-temporal">
       6.3.1.3 Remuestreo de la serie temporal
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modelado-prophet">
     6.3.2 Modelado Prophet
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#preparacion-del-dataframe">
       6.3.2.1 Preparación del DataFrame
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inicializacion-y-ajuste-del-modelo-prophet">
       6.3.2.2 Inicialización y ajuste del modelo Prophet
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#generacion-de-predicciones-futuras">
       6.3.2.3 Generación de predicciones futuras
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizacion-de-resultados">
       6.3.2.4 Visualización de resultados
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conclusion">
       6.3.2.5 Conclusión
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparacion-de-modelos">
     6.3.4 Comparación de modelos
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modelo-arima">
       6.3.4.1 Modelo ARIMA
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modelo-holt-winters-ets">
       6.3.4.2 Modelo Holt-Winters (ETS)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualizacion-de-pronosticos-de-los-modelos">
       6.3.4.3 Visualización de Pronósticos de los modelos
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="unidad-6-regresion-en-series-de-tiempo">
<h1>Unidad 6: Regresión en series de tiempo<a class="headerlink" href="#unidad-6-regresion-en-series-de-tiempo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduccion">
<h2>6.1 Introducción<a class="headerlink" href="#introduccion" title="Permalink to this headline">¶</a></h2>
<p>Combinaremos modelos causales con datos de series de tiempo, a través de algoritmos de aprendizaje estadístico.</p>
</div>
<div class="section" id="objetivo">
<h2>6.2 Objetivo<a class="headerlink" href="#objetivo" title="Permalink to this headline">¶</a></h2>
<p>Combinar métodos autorregresivos y de aprendizaje estadístico mediante el enfoque de la clasificación para analizar datos de series de tiempo.</p>
</div>
<div class="section" id="accion">
<h2>6.3 Acción<a class="headerlink" href="#accion" title="Permalink to this headline">¶</a></h2>
<p>Esta vez deberás aplicar el algoritmo Facebook´s Prophet, y si es viable la justificación para la variable en serie de tiempo vista como una regresión. Esto último, complementa los modelos planteados anteriormente y el ajujste a un modelo lineal y estacionario.</p>
<div class="section" id="preparacion-de-los-datos">
<h3>6.3.1 Preparación de los datos<a class="headerlink" href="#preparacion-de-los-datos" title="Permalink to this headline">¶</a></h3>
<p>Previo al análisis detallado, es imperativo comprender el proceso de preparación de datos temporales para garantizar su idoneidad y coherencia en el estudio.
cia en el estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importando librerias</span>

<span class="c1"># librerias para la transformación de datos</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.seasonal</span> <span class="kn">import</span> <span class="n">seasonal_decompose</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.stattools</span> <span class="kn">import</span> <span class="n">adfuller</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.holtwinters</span> <span class="kn">import</span> <span class="n">ExponentialSmoothing</span>
<span class="kn">from</span> <span class="nn">statsmodels.graphics.tsaplots</span> <span class="kn">import</span> <span class="n">plot_acf</span><span class="p">,</span> <span class="n">plot_pacf</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.arima.model</span> <span class="kn">import</span> <span class="n">ARIMA</span>

<span class="c1"># libreria para visualización de datos</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">prophet</span> <span class="kn">import</span> <span class="n">Prophet</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">dc094fca4d75</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="ne">---&gt; </span><span class="mi">17</span> <span class="kn">from</span> <span class="nn">prophet</span> <span class="kn">import</span> <span class="n">Prophet</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;prophet&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="recopilacion-de-los-datos">
<h4>6.3.1.1 Recopilación de los datos<a class="headerlink" href="#recopilacion-de-los-datos" title="Permalink to this headline">¶</a></h4>
<p>En este bloque, se carga el conjunto de datos desde un archivo CSV utilizando la biblioteca pandas. Se especifica el delimitador de campos y se visualizan las primeras filas del dataframe para verificar que los datos se han cargado correctamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># recopilación de datos</span>
<span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./dataset.csv&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
<span class="n">df_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>codigo</th>
      <th>contenido</th>
      <th>hora1</th>
      <th>hora2</th>
      <th>hora3</th>
      <th>hora4</th>
      <th>hora5</th>
      <th>hora6</th>
      <th>hora7</th>
      <th>...</th>
      <th>hora15</th>
      <th>hora16</th>
      <th>hora17</th>
      <th>hora18</th>
      <th>hora19</th>
      <th>hora20</th>
      <th>hora21</th>
      <th>hora22</th>
      <th>hora23</th>
      <th>hora24</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>87.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>75.768212</td>
      <td>...</td>
      <td>75.768212</td>
      <td>71.278212</td>
      <td>69.067212</td>
      <td>76.278212</td>
      <td>77.778212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.278212</td>
      <td>76.778212</td>
      <td>76.778212</td>
      <td>...</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>81.768212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>87.778212</td>
      <td>82.778212</td>
      <td>76.778212</td>
      <td>76.778212</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>77.678212</td>
      <td>...</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>82.778212</td>
      <td>87.778212</td>
      <td>114.425212</td>
      <td>87.778212</td>
      <td>82.778212</td>
      <td>77.678212</td>
      <td>77.678212</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>...</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>77.778212</td>
      <td>85.778212</td>
      <td>85.778212</td>
      <td>87.778212</td>
      <td>85.778212</td>
      <td>85.778212</td>
      <td>81.768212</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5/01/2006</td>
      <td>PBNA</td>
      <td>PRECIO DE BOLSA NACIONAL ($/KWH)</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>86.778212</td>
      <td>88.278212</td>
      <td>...</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>91.134212</td>
      <td>88.278212</td>
      <td>88.278212</td>
      <td>86.778212</td>
      <td>86.778212</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 27 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="transformacion-de-datos">
<h4>6.3.1.2 Transformación de Datos<a class="headerlink" href="#transformacion-de-datos" title="Permalink to this headline">¶</a></h4>
<p>Este bloque define una función para transformar el dataframe original. Se realiza una copia del dataframe, se convierte la columna de fechas a un formato de fecha adecuado, y se agregan nuevas columnas para el año, mes y día. Luego, se seleccionan y reorganizan las columnas, y finalmente, se pivotea la tabla para facilitar su uso en análisis posteriores.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">trf_data</span><span class="p">(</span><span class="n">df_data</span><span class="p">):</span>
    
    <span class="c1"># copia del dataframe</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="c1"># transformación de fechas</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)</span>
    
    <span class="c1"># agregando las columnas de fechas</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ano&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">year</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">month</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;dia&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">day</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="c1"># selección de columnas</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">,</span><span class="s1">&#39;ano&#39;</span><span class="p">,</span><span class="s1">&#39;mes&#39;</span><span class="p">,</span><span class="s1">&#39;dia&#39;</span><span class="p">,</span> <span class="s1">&#39;hora1&#39;</span><span class="p">,</span> <span class="s1">&#39;hora2&#39;</span><span class="p">,</span> <span class="s1">&#39;hora3&#39;</span><span class="p">,</span><span class="s1">&#39;hora4&#39;</span><span class="p">,</span> <span class="s1">&#39;hora5&#39;</span><span class="p">,</span> <span class="s1">&#39;hora6&#39;</span><span class="p">,</span> <span class="s1">&#39;hora7&#39;</span><span class="p">,</span> <span class="s1">&#39;hora8&#39;</span><span class="p">,</span> <span class="s1">&#39;hora9&#39;</span><span class="p">,</span> <span class="s1">&#39;hora10&#39;</span><span class="p">,</span><span class="s1">&#39;hora11&#39;</span><span class="p">,</span> <span class="s1">&#39;hora12&#39;</span><span class="p">,</span> <span class="s1">&#39;hora13&#39;</span><span class="p">,</span> <span class="s1">&#39;hora14&#39;</span><span class="p">,</span> <span class="s1">&#39;hora15&#39;</span><span class="p">,</span> <span class="s1">&#39;hora16&#39;</span><span class="p">,</span> <span class="s1">&#39;hora17&#39;</span><span class="p">,</span><span class="s1">&#39;hora18&#39;</span><span class="p">,</span> <span class="s1">&#39;hora19&#39;</span><span class="p">,</span> <span class="s1">&#39;hora20&#39;</span><span class="p">,</span> <span class="s1">&#39;hora21&#39;</span><span class="p">,</span> <span class="s1">&#39;hora22&#39;</span><span class="p">,</span> <span class="s1">&#39;hora23&#39;</span><span class="p">,</span> <span class="s1">&#39;hora24&#39;</span><span class="p">]]</span>
    
    <span class="c1"># Convertir la tabla</span>
    <span class="n">list_id</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;hora&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
    <span class="n">list_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;hora&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
    
    <span class="c1"># pivotear la tabla</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="n">list_id</span><span class="p">,</span><span class="n">value_vars</span><span class="o">=</span><span class="n">list_value</span><span class="p">,</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;periodo&#39;</span><span class="p">,</span><span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;valor&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dataset trasnformado</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">trf_data</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>ano</th>
      <th>mes</th>
      <th>dia</th>
      <th>periodo</th>
      <th>valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-01</td>
      <td>2006</td>
      <td>1</td>
      <td>1</td>
      <td>hora1</td>
      <td>87.778212</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-01-02</td>
      <td>2006</td>
      <td>1</td>
      <td>2</td>
      <td>hora1</td>
      <td>76.278212</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-01-03</td>
      <td>2006</td>
      <td>1</td>
      <td>3</td>
      <td>hora1</td>
      <td>77.678212</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-01-04</td>
      <td>2006</td>
      <td>1</td>
      <td>4</td>
      <td>hora1</td>
      <td>77.778212</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-01-05</td>
      <td>2006</td>
      <td>1</td>
      <td>5</td>
      <td>hora1</td>
      <td>86.778212</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 156360 entries, 0 to 156359
Data columns (total 6 columns):
 #   Column          Non-Null Count   Dtype         
---  ------          --------------   -----         
 0   fechaoperacion  156360 non-null  datetime64[ns]
 1   ano             156360 non-null  int64         
 2   mes             156360 non-null  int64         
 3   dia             156360 non-null  int64         
 4   periodo         156360 non-null  object        
 5   valor           156360 non-null  float64       
dtypes: datetime64[ns](1), float64(1), int64(3), object(1)
memory usage: 7.2+ MB
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="remuestreo-de-la-serie-temporal">
<h4>6.3.1.3 Remuestreo de la serie temporal<a class="headerlink" href="#remuestreo-de-la-serie-temporal" title="Permalink to this headline">¶</a></h4>
<p>En este bloque, se crea una copia del dataframe transformado y se remuestrean los datos a valores mensuales. Se agrupan los datos por fecha y se calcula la media mensual. Luego, se seleccionan las columnas relevantes y se visualiza el nuevo dataframe remuestreado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remuestreando la serie de tiempo a valores mensuales</span>

<span class="c1"># creando una copia del dataframe</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[[</span><span class="s1">&#39;ano&#39;</span><span class="p">,</span><span class="s1">&#39;mes&#39;</span><span class="p">,</span><span class="s1">&#39;valor&#39;</span><span class="p">]]</span>

<span class="c1"># creando el groupby</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ano&#39;</span><span class="p">,</span><span class="s1">&#39;mes&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># </span>
<span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;ano&#39;</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;mes&#39;</span><span class="p">]),</span><span class="mi">1</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#  remuestreando el dataframe a mensual</span>
<span class="n">df_vcm</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="p">[[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">,</span><span class="s1">&#39;valor&#39;</span><span class="p">]]</span>

<span class="c1"># mostrando el dataframe transformado</span>
<span class="n">df_vcm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fechaoperacion</th>
      <th>valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2006-01-01</td>
      <td>79.026486</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2006-02-01</td>
      <td>75.520919</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2006-03-01</td>
      <td>65.787447</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006-04-01</td>
      <td>54.012347</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2006-05-01</td>
      <td>53.819582</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>211</th>
      <td>2023-08-01</td>
      <td>528.887237</td>
    </tr>
    <tr>
      <th>212</th>
      <td>2023-09-01</td>
      <td>1017.549693</td>
    </tr>
    <tr>
      <th>213</th>
      <td>2023-10-01</td>
      <td>1013.522208</td>
    </tr>
    <tr>
      <th>214</th>
      <td>2023-11-01</td>
      <td>500.608645</td>
    </tr>
    <tr>
      <th>215</th>
      <td>2023-12-01</td>
      <td>655.417696</td>
    </tr>
  </tbody>
</table>
<p>216 rows × 2 columns</p>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="modelado-prophet">
<h3>6.3.2 Modelado Prophet<a class="headerlink" href="#modelado-prophet" title="Permalink to this headline">¶</a></h3>
<p>En esta sección, se realizará el modelado de series de tiempo utilizando el algoritmo Facebook’s Prophet. A continuación se describen los pasos que se llevarán a cabo para ajustar y predecir los datos de la serie temporal.</p>
<div class="section" id="preparacion-del-dataframe">
<h4>6.3.2.1 Preparación del DataFrame<a class="headerlink" href="#preparacion-del-dataframe" title="Permalink to this headline">¶</a></h4>
<p>El primer paso crucial en nuestro análisis es la preparación adecuada de los datos. Para ello:</p>
<ul class="simple">
<li><p>Creación de una copia del DataFrame: Se generará una copia del DataFrame original. Este paso es esencial para mantener la integridad de los datos originales, evitando modificaciones accidentales durante el proceso de análisis.</p></li>
<li><p>Renombrar columnas: Adaptaremos el formato del DataFrame para que sea compatible con los requisitos específicos del modelo Prophet. Esto implica renombrar la columna que contiene las fechas (fechaoperacion) a ds y la columna de valores (valor) a y. Este cambio es fundamental para que el modelo pueda interpretar correctamente los datos.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># creando copia del dataframe</span>
<span class="n">df_ph</span> <span class="o">=</span> <span class="n">df_vcm</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Formatear el DataFrame de acuerdo a los requisitos de Prophet</span>
<span class="n">df_ph</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">:</span> <span class="s1">&#39;ds&#39;</span><span class="p">,</span> <span class="s1">&#39;valor&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="inicializacion-y-ajuste-del-modelo-prophet">
<h4>6.3.2.2 Inicialización y ajuste del modelo Prophet<a class="headerlink" href="#inicializacion-y-ajuste-del-modelo-prophet" title="Permalink to this headline">¶</a></h4>
<p>Una vez preparados los datos, procederemos a:</p>
<ul class="simple">
<li><p>Inicialización del modelo: Se inicializará una instancia del modelo Prophet. Prophet es conocido por su capacidad para manejar datos con estacionalidades fuertes y tendencias múltiples, lo que lo convierte en una herramienta robusta para el análisis de series de tiempo.</p></li>
<li><p>Ajuste del modelo: Ajustaremos el modelo a los datos formateados. Este proceso permite que Prophet aprenda de los datos históricos, capturando patrones y tendencias subyacentes.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inicializar y ajustar el modelo Prophet</span>
<span class="n">model_ph</span> <span class="o">=</span> <span class="n">Prophet</span><span class="p">()</span>
<span class="n">model_ph</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_ph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15:18:40 - cmdstanpy - INFO - Chain [1] start processing
15:18:40 - cmdstanpy - INFO - Chain [1] done processing
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;prophet.forecaster.Prophet at 0x1b7fa7249d0&gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="generacion-de-predicciones-futuras">
<h4>6.3.2.3 Generación de predicciones futuras<a class="headerlink" href="#generacion-de-predicciones-futuras" title="Permalink to this headline">¶</a></h4>
<p>Con el modelo ajustado, el siguiente paso es la predicción:</p>
<ul class="simple">
<li><p>Extensión del horizonte temporal: Crearemos un nuevo DataFrame que extienda el horizonte temporal de nuestros datos en 12 meses hacia adelante. Este DataFrame es esencial para que el modelo pueda generar predicciones para un período futuro específico.</p></li>
<li><p>Generación de predicciones: Utilizaremos el modelo ajustado para realizar predicciones sobre el período extendido. Esto nos permitirá visualizar posibles tendencias y comportamientos futuros de la serie temporal.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hacer una predicción para el futuro</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">model_ph</span><span class="o">.</span><span class="n">make_future_dataframe</span><span class="p">(</span><span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>  <span class="c1"># Predecir 12 meses hacia adelante</span>

<span class="n">forecast_ph</span> <span class="o">=</span> <span class="n">model_ph</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Python\Python311\Lib\site-packages\prophet\forecaster.py:1854: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  dates = pd.date_range(
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="visualizacion-de-resultados">
<h4>6.3.2.4 Visualización de resultados<a class="headerlink" href="#visualizacion-de-resultados" title="Permalink to this headline">¶</a></h4>
<p>Para interpretar y comunicar eficazmente los resultados del modelo, se procederá a:</p>
<ul class="simple">
<li><p>Gráfico de predicciones: Se generará un gráfico que muestre las predicciones realizadas por el modelo. Esta visualización facilitará la comprensión de las proyecciones futuras y permitirá identificar posibles tendencias y puntos de interés.</p></li>
<li><p>Análisis de componentes: Adicionalmente, se graficarán los componentes de la predicción, tales como la tendencia y la estacionalidad. Esta descomposición es vital para entender las contribuciones individuales de diferentes factores a la serie temporal, proporcionando una visión más detallada y completa.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Graficar los resultados</span>
<span class="n">model_ph</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecast_ph</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Python\Python311\Lib\site-packages\prophet\plot.py:72: FutureWarning: The behavior of DatetimeProperties.to_pydatetime is deprecated, in a future version this will return a Series containing python datetime objects instead of an ndarray. To retain the old behavior, call `np.array` on the result
  fcst_t = fcst[&#39;ds&#39;].dt.to_pydatetime()
c:\Python\Python311\Lib\site-packages\prophet\plot.py:73: FutureWarning: The behavior of DatetimeProperties.to_pydatetime is deprecated, in a future version this will return a Series containing python datetime objects instead of an ndarray. To retain the old behavior, call `np.array` on the result
  ax.plot(m.history[&#39;ds&#39;].dt.to_pydatetime(), m.history[&#39;y&#39;], &#39;k.&#39;,
</pre></div>
</div>
<img alt="_images/und6_forecast_17_1.png" src="_images/und6_forecast_17_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Graficar los componentes de la predicción</span>
<span class="n">model_ph</span><span class="o">.</span><span class="n">plot_components</span><span class="p">(</span><span class="n">forecast_ph</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Python\Python311\Lib\site-packages\prophet\plot.py:228: FutureWarning: The behavior of DatetimeProperties.to_pydatetime is deprecated, in a future version this will return a Series containing python datetime objects instead of an ndarray. To retain the old behavior, call `np.array` on the result
  fcst_t = fcst[&#39;ds&#39;].dt.to_pydatetime()
c:\Python\Python311\Lib\site-packages\prophet\plot.py:351: FutureWarning: The behavior of DatetimeProperties.to_pydatetime is deprecated, in a future version this will return a Series containing python datetime objects instead of an ndarray. To retain the old behavior, call `np.array` on the result
  df_y[&#39;ds&#39;].dt.to_pydatetime(), seas[name], ls=&#39;-&#39;, c=&#39;#0072B2&#39;)
c:\Python\Python311\Lib\site-packages\prophet\plot.py:354: FutureWarning: The behavior of DatetimeProperties.to_pydatetime is deprecated, in a future version this will return a Series containing python datetime objects instead of an ndarray. To retain the old behavior, call `np.array` on the result
  df_y[&#39;ds&#39;].dt.to_pydatetime(), seas[name + &#39;_lower&#39;],
</pre></div>
</div>
<img alt="_images/und6_forecast_18_1.png" src="_images/und6_forecast_18_1.png" />
</div>
</div>
</div>
<div class="section" id="conclusion">
<h4>6.3.2.5 Conclusión<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h4>
<p>El uso del modelo Prophet nos permite no solo ajustar nuestros datos históricos de manera precisa, sino también proyectar tendencias futuras con un alto grado de confianza. Este enfoque integral facilita la toma de decisiones informadas basadas en datos, permitiendo a la organización anticiparse a cambios y planificar estratégicamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># transformación de la predicción para gráfico de modelos</span>
<span class="n">forecast_ph_pred</span> <span class="o">=</span> <span class="n">forecast_ph</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">cond</span> <span class="o">=</span> <span class="n">forecast_ph_pred</span><span class="p">[</span><span class="s1">&#39;ds&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="n">forecast_ph_pred</span> <span class="o">=</span> <span class="n">forecast_ph_pred</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="comparacion-de-modelos">
<h3>6.3.4 Comparación de modelos<a class="headerlink" href="#comparacion-de-modelos" title="Permalink to this headline">¶</a></h3>
<p>En esta sección, se llevará a cabo una comparación detallada entre tres modelos de series de tiempo: Prophet, ARIMA y Holt-Winters (ETS). El objetivo es evaluar el rendimiento de cada modelo en la predicción de los últimos 12 meses de la serie temporal.</p>
<div class="section" id="modelo-arima">
<h4>6.3.4.1 Modelo ARIMA<a class="headerlink" href="#modelo-arima" title="Permalink to this headline">¶</a></h4>
<p>El modelo ARIMA (AutoRegressive Integrated Moving Average) es una técnica ampliamente utilizada para el análisis y predicción de series de tiempo. Este modelo combina tres componentes: autorregresivo (AR), diferenciación (I) y media móvil (MA), permitiendo capturar diversas características de la serie temporal como tendencias y patrones estacionales. A continuación, se describe el proceso de ajuste y predicción utilizando el modelo ARIMA.</p>
<p>Ajuste del modelo ARIMA:</p>
<ul class="simple">
<li><p>Se ajusta un modelo ARIMA configurado con parámetros específicos, determinados a partir de análisis previos de los datos.</p></li>
<li><p>Se generan predicciones para los próximos 12 meses, incluyendo intervalos de confianza para evaluar la precisión de las predicciones.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ajustar un modelo ARIMA(4,1,3) a la serie temporal, usando los parámetros sugeridos por los gráficos ACF y PACF</span>
<span class="n">model_ar</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">model_ar</span> <span class="o">=</span> <span class="n">model_ar</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># Mostrar el resumen del modelo ajustado</span>
<span class="n">model_ar</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>SARIMAX Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>valor</td>      <th>  No. Observations:  </th>    <td>216</td>   
</tr>
<tr>
  <th>Model:</th>            <td>ARIMA(4, 1, 3)</td>  <th>  Log Likelihood     </th> <td>-1271.589</td>
</tr>
<tr>
  <th>Date:</th>            <td>Mon, 27 May 2024</td> <th>  AIC                </th> <td>2559.179</td> 
</tr>
<tr>
  <th>Time:</th>                <td>15:19:04</td>     <th>  BIC                </th> <td>2586.144</td> 
</tr>
<tr>
  <th>Sample:</th>                  <td>0</td>        <th>  HQIC               </th> <td>2570.074</td> 
</tr>
<tr>
  <th></th>                      <td> - 216</td>      <th>                     </th>     <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>        <td>opg</td>       <th>                     </th>     <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
     <td></td>       <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>ar.L1</th>  <td>   -1.3596</td> <td>    0.073</td> <td>  -18.499</td> <td> 0.000</td> <td>   -1.504</td> <td>   -1.216</td>
</tr>
<tr>
  <th>ar.L2</th>  <td>   -1.4133</td> <td>    0.110</td> <td>  -12.866</td> <td> 0.000</td> <td>   -1.629</td> <td>   -1.198</td>
</tr>
<tr>
  <th>ar.L3</th>  <td>   -0.9801</td> <td>    0.097</td> <td>  -10.062</td> <td> 0.000</td> <td>   -1.171</td> <td>   -0.789</td>
</tr>
<tr>
  <th>ar.L4</th>  <td>   -0.5078</td> <td>    0.042</td> <td>  -12.003</td> <td> 0.000</td> <td>   -0.591</td> <td>   -0.425</td>
</tr>
<tr>
  <th>ma.L1</th>  <td>    1.2854</td> <td>    0.086</td> <td>   14.867</td> <td> 0.000</td> <td>    1.116</td> <td>    1.455</td>
</tr>
<tr>
  <th>ma.L2</th>  <td>    1.0554</td> <td>    0.123</td> <td>    8.600</td> <td> 0.000</td> <td>    0.815</td> <td>    1.296</td>
</tr>
<tr>
  <th>ma.L3</th>  <td>    0.4069</td> <td>    0.122</td> <td>    3.333</td> <td> 0.001</td> <td>    0.168</td> <td>    0.646</td>
</tr>
<tr>
  <th>sigma2</th> <td> 7977.5712</td> <td>  437.381</td> <td>   18.239</td> <td> 0.000</td> <td> 7120.321</td> <td> 8834.822</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Ljung-Box (L1) (Q):</th>     <td>0.02</td>  <th>  Jarque-Bera (JB):  </th> <td>1789.29</td>
</tr>
<tr>
  <th>Prob(Q):</th>                <td>0.89</td>  <th>  Prob(JB):          </th>  <td>0.00</td>  
</tr>
<tr>
  <th>Heteroskedasticity (H):</th> <td>19.45</td> <th>  Skew:              </th>  <td>2.10</td>  
</tr>
<tr>
  <th>Prob(H) (two-sided):</th>    <td>0.00</td>  <th>  Kurtosis:          </th>  <td>16.49</td> 
</tr>
</table><br/><br/>Warnings:<br/>[1] Covariance matrix calculated using the outer product of gradients (complex-step).</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hacer predicciones con el modelo ARIMA ajustado para los próximos 12 períodos</span>
<span class="n">forecast_12</span> <span class="o">=</span> <span class="n">model_ar</span><span class="o">.</span><span class="n">get_forecast</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">forecast_conf_int_12</span> <span class="o">=</span> <span class="n">forecast_12</span><span class="o">.</span><span class="n">conf_int</span><span class="p">()</span>

<span class="c1"># Crear un DataFrame para visualizar las predicciones y los intervalos de confianza para 24 meses</span>
<span class="n">forecast_ar</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Predicted&#39;</span><span class="p">:</span> <span class="n">forecast_12</span><span class="o">.</span><span class="n">predicted_mean</span><span class="p">,</span>
    <span class="s1">&#39;Lower CI&#39;</span><span class="p">:</span> <span class="n">forecast_conf_int_12</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="s1">&#39;Upper CI&#39;</span><span class="p">:</span> <span class="n">forecast_conf_int_12</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">forecast_ar</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Predicted</th>
      <th>Lower CI</th>
      <th>Upper CI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>216</th>
      <td>798.637263</td>
      <td>623.578669</td>
      <td>973.695857</td>
    </tr>
    <tr>
      <th>217</th>
      <td>909.751949</td>
      <td>671.188779</td>
      <td>1148.315120</td>
    </tr>
    <tr>
      <th>218</th>
      <td>709.861276</td>
      <td>444.123132</td>
      <td>975.599420</td>
    </tr>
    <tr>
      <th>219</th>
      <td>605.610642</td>
      <td>322.970210</td>
      <td>888.251073</td>
    </tr>
    <tr>
      <th>220</th>
      <td>848.230423</td>
      <td>544.215010</td>
      <td>1152.245836</td>
    </tr>
    <tr>
      <th>221</th>
      <td>805.189217</td>
      <td>456.522034</td>
      <td>1153.856400</td>
    </tr>
    <tr>
      <th>222</th>
      <td>724.485897</td>
      <td>358.304220</td>
      <td>1090.667574</td>
    </tr>
    <tr>
      <th>223</th>
      <td>710.196025</td>
      <td>329.526408</td>
      <td>1090.865642</td>
    </tr>
    <tr>
      <th>224</th>
      <td>762.662996</td>
      <td>359.652211</td>
      <td>1165.673781</td>
    </tr>
    <tr>
      <th>225</th>
      <td>812.477166</td>
      <td>388.151557</td>
      <td>1236.802776</td>
    </tr>
    <tr>
      <th>226</th>
      <td>725.584679</td>
      <td>281.868064</td>
      <td>1169.301294</td>
    </tr>
    <tr>
      <th>227</th>
      <td>729.154267</td>
      <td>272.129745</td>
      <td>1186.178788</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="modelo-holt-winters-ets">
<h4>6.3.4.2 Modelo Holt-Winters (ETS)<a class="headerlink" href="#modelo-holt-winters-ets" title="Permalink to this headline">¶</a></h4>
<p>El modelo Holt-Winters, también conocido como ETS (Error, Trend, Seasonal), es una metodología eficaz para la predicción de series de tiempo que presentan tendencias y estacionalidades. Este modelo utiliza componentes aditivos o multiplicativos para capturar la variabilidad en los datos, proporcionando una estructura flexible y precisa para el análisis temporal. A continuación, se describe el proceso de ajuste y predicción utilizando el modelo Holt-Winters.</p>
<p>Ajuste del modelo Holt-Winters (ETS):</p>
<ul class="simple">
<li><p>Se aplica el método Holt-Winters a los datos, utilizando componentes aditivos para capturar tanto la tendencia como la estacionalidad.</p></li>
<li><p>Se generan predicciones para los próximos 12 meses, ofreciendo una visión anticipada del comportamiento futuro de la serie temporal.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear una serie temporal</span>
<span class="n">precio_ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2006-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">))</span>

<span class="c1"># Estabilización de la variabilidad</span>
<span class="n">preciolog</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">precio_ts</span><span class="p">)</span>

<span class="c1"># Aplicación del método Holt-Winters</span>
<span class="n">model_hw</span> <span class="o">=</span> <span class="n">ExponentialSmoothing</span><span class="p">(</span><span class="n">preciolog</span><span class="p">,</span> <span class="n">seasonal_periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">trend</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="n">seasonal</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="n">fit_hw</span> <span class="o">=</span> <span class="n">model_hw</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># Predicción del siguiente año</span>
<span class="n">forecast_hw</span> <span class="o">=</span> <span class="n">fit_hw</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">forecast_hw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">forecast_hw</span><span class="p">)</span>

<span class="n">forecast_hw</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\uenergia\AppData\Local\Temp\ipykernel_19144\1744597310.py:2: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  precio_ts = pd.Series(df_vcm[&#39;valor&#39;].values, index=pd.date_range(start=&#39;2006-01&#39;, periods=len(df_vcm), freq=&#39;M&#39;))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-01-31    682.405436
2024-02-29    849.408270
2024-03-31    719.570056
2024-04-30    614.322265
2024-05-31    553.492579
2024-06-30    516.287423
2024-07-31    491.847869
2024-08-31    561.084371
2024-09-30    704.403964
2024-10-31    824.921868
2024-11-30    659.444182
2024-12-31    730.551716
Freq: ME, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="visualizacion-de-pronosticos-de-los-modelos">
<h4>6.3.4.3 Visualización de Pronósticos de los modelos<a class="headerlink" href="#visualizacion-de-pronosticos-de-los-modelos" title="Permalink to this headline">¶</a></h4>
<p>En esta etapa, se procederá a la visualización comparativa de las predicciones obtenidas de los modelos Prophet, ARIMA y Holt-Winters (ETS). Esta visualización es para evaluar la precisión y el desempeño de cada modelo en relación con los datos reales. Además, se incluirán intervalos de confianza para las predicciones de Prophet y ARIMA, permitiendo así una comprensión más completa de la incertidumbre asociada a estas estimaciones.</p>
<ul class="simple">
<li><p>Se crea un gráfico que compara las predicciones de los tres modelos con los datos reales.</p></li>
<li><p>Se incluyen intervalos de confianza para las predicciones de Prophet y ARIMA para evaluar la incertidumbre de las predicciones.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear el gráfico comparativo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>

<span class="n">prediction_dates_12</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="c1"># Datos reales</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;fechaoperacion&#39;</span><span class="p">],</span> <span class="n">df_vcm</span><span class="p">[</span><span class="s1">&#39;valor&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Datos Reales&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="c1"># Predicciones Prophet</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2024-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">),</span> <span class="n">forecast_ph_pred</span><span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Modelo Prophet&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2024-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">),</span> <span class="n">forecast_ph_pred</span><span class="p">[</span><span class="s1">&#39;yhat_lower&#39;</span><span class="p">],</span> <span class="n">forecast_ph_pred</span><span class="p">[</span><span class="s1">&#39;yhat_upper&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># Predicciones ARIMA</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">prediction_dates_12</span><span class="p">,</span> <span class="n">forecast_ar</span><span class="p">[</span><span class="s1">&#39;Predicted&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Modelo ARIMA&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">prediction_dates_12</span><span class="p">,</span> <span class="n">forecast_ar</span><span class="p">[</span><span class="s1">&#39;Lower CI&#39;</span><span class="p">],</span> <span class="n">forecast_ar</span><span class="p">[</span><span class="s1">&#39;Upper CI&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># Predicciones ETS</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2024-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">),</span> <span class="n">forecast_hw</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Modelo ETS&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>

<span class="c1"># Formatear el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comparación de Predicciones: Prophet vs ARIMA vs ETS&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\uenergia\AppData\Local\Temp\ipykernel_19144\2027461562.py:4: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  prediction_dates_12 = pd.date_range(start=df_vcm[&#39;fechaoperacion&#39;].iloc[-1] + pd.DateOffset(months=1), periods=12, freq=&#39;M&#39;)
C:\Users\uenergia\AppData\Local\Temp\ipykernel_19144\2027461562.py:10: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  plt.plot(pd.date_range(start=&#39;2024-01&#39;, periods=12, freq=&#39;M&#39;), forecast_ph_pred[&#39;yhat&#39;], label=&#39;Modelo Prophet&#39;, color=&#39;blue&#39;)
C:\Users\uenergia\AppData\Local\Temp\ipykernel_19144\2027461562.py:11: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  plt.fill_between(pd.date_range(start=&#39;2024-01&#39;, periods=12, freq=&#39;M&#39;), forecast_ph_pred[&#39;yhat_lower&#39;], forecast_ph_pred[&#39;yhat_upper&#39;], color=&#39;blue&#39;, alpha=0.2)
C:\Users\uenergia\AppData\Local\Temp\ipykernel_19144\2027461562.py:18: FutureWarning: &#39;M&#39; is deprecated and will be removed in a future version, please use &#39;ME&#39; instead.
  plt.plot(pd.date_range(start=&#39;2024-01&#39;, periods=12, freq=&#39;M&#39;), forecast_hw, label=&#39;Modelo ETS&#39;, color=&#39;orange&#39;)
</pre></div>
</div>
<img alt="_images/und6_forecast_27_1.png" src="_images/und6_forecast_27_1.png" />
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="und5_forecast.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Unidad 5: Modelos estacionarios en series de tiempo</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Grupo 6:Keyner Martínez, John Vargas y Johan Bolivar<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>